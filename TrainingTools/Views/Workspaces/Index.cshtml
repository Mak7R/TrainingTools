@model IEnumerable<WorkspaceViewModel>

@{
    ViewBag.Title = $"Workspaces";
    ViewBag.CurrentPage = ActivePage.Workspaces;
}

@{
    var searchOptions = new Dictionary<string, string>
    {
        { nameof(WorkspaceViewModel.Id), "Id" },
        { nameof(WorkspaceViewModel.Name), "Name" }
    };

    const string partialIconsPath = "Partials/SmallItems/";
}

<div class="container-fluid">
    @await Html.PartialAsync("Partials/SearchPartialView", new FilterModel{SearchByOptions = searchOptions}, ViewData)
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th class="col-2">
                    @await Component.InvokeAsync("Sort", 
                        new SortingComponentView
                        {
                            Value = nameof(WorkspaceViewModel.Id), 
                            Display = "Id",
                            Options = new Dictionary<string, string>
                            {
                                {"",$"{partialIconsPath}None"}, {"DESCENDING", $"{partialIconsPath}Down"}, {"ASCENDING", $"{partialIconsPath}Up"}
                            }
                        })
                </th>
                <th class="col-2">
                    @await Component.InvokeAsync("Sort",
                             new SortingComponentView
                             {
                                 Value = nameof(WorkspaceViewModel.Name),
                                 Display = "Name",
                                 Options = new Dictionary<string, string>()
                                 {
                                     { "", $"{partialIconsPath}None" }, { "A-Z", $"{partialIconsPath}Up" }, { "Z-A", $"{partialIconsPath}Down" }
                                 }
                             })
                </th>
                <th class="col-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach(var workspace in Model)
            {
                <tr>
                    <td>@workspace.Id</td>
                    <td>
                        <a asp-controller="Workspaces" asp-action="Get" asp-route-workspaceId="@workspace.Id">@workspace.Name</a>
                    </td>
                    <td>
                        <a asp-controller="Workspaces" asp-action="GetInfo" asp-route-workspaceId="@workspace.Id" class="btn btn-success">Info</a>
                        <a asp-controller="Groups" asp-action="Index" asp-route-workspaceId="@workspace.Id" class="btn btn-success">Groups</a>
                        <a asp-controller="Exercises" asp-action="Index" asp-route-workspaceId="@workspace.Id" class="btn btn-success">Exercises</a>
                        <a asp-controller="Workspaces" asp-action="Edit" asp-route-workspaceId="@workspace.Id" class="btn btn-primary">Edit</a>
                        @await Html.PartialAsync("Partials/DeleteWithPasswordPartialView", new DeleteWithPasswordViewModel
                            ("Delete", $"Delete workspace: {workspace.Name}", $"/workspaces/{workspace.Id}/delete", "alert('Workspace was successful deleted');window.location.reload();"), ViewData)
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <a asp-controller="Workspaces" asp-action="Add" class="btn btn-success btn-block w-100">Add Workspace</a>
</div>





